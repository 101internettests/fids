Feed monitor for XML feeds (YML/RSS)
====================================

–ê–≤—Ç–æ—Ç–µ—Å—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ XML-—Ñ–∏–¥–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª–µ–π `url`, `name`, `picture`, `price`, `oldprice` –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ `offer`. –¢–µ—Å—Ç –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ –ø–æ —Ñ–∏–¥—É –∏ `offer id`, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–µ —Ä–µ–∑—é–º–µ –≤ 09:00 –∏ 17:00 (CE(S)T).

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∫ `allfeed.xml`, —Ç–∞–∫ –∏ `feed.xml`.
- –î–ª—è `feed.xml` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ–¥—Ñ–∏–¥—ã (`*.xml`) –≤ —Ä–∞–º–∫–∞—Ö –¥–æ–º–µ–Ω–∞ –∏ —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è.
- –í–∞–ª–∏–¥–∞—Ü–∏–∏: –¥–æ–º–µ–Ω —É—Ä–ª–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–º–µ–Ω—É —Ñ–∏–¥–∞, —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è, `oldprice > price`.
- –ù–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–µ –ª–æ–≥–∏ –ø–æ –¥–Ω—è–º –≤ –ø–∞–ø–∫–µ `logs/`.
- –ê–ª–µ—Ä—Ç—ã: –∫–æ–Ω—Å–æ–ª—å/–ª–æ–≥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ Telegram.

–£—Å—Ç–∞–Ω–æ–≤–∫–∞
1) Python 3.10+
2) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
python -m venv .venv
.venv\\Scripts\\pip install -r requirements.txt
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞
1) –°–æ–∑–¥–∞–π—Ç–µ `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ `FEEDS` ‚Äî —Å–ø–∏—Å–æ–∫ URL —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é.
2) –ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ —É–∫–∞–∂–∏—Ç–µ `TELEGRAM_BOT_TOKEN` –∏ `TELEGRAM_CHAT_ID`. –û—Ç–∫–ª—é—á–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –≤ Telegram –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ `TELEGRAM_ENABLED=false`. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ fids_stat –≤ —Ñ–∞–π–ª: `FIDS_STAT_PATH`.

–ó–∞–ø—É—Å–∫
- –ü—Ä–æ–≥–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ Jenkins job):
```bash
python -m src.main
```
–ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏—Ç–æ–≥–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ `fids_stat` –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
```
‚úÖ –û–±—â–∏–π –æ—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ñ–∏–¥–æ–≤

‚è∞ –í—Ä–µ–º—è: YYYY-MM-DD HH:MM (TZ)
üåç –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ñ–∏–¥–æ–≤: <—á–∏—Å–ª–æ>
‚ùå –§–∏–¥–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏: <—á–∏—Å–ª–æ>
```
–ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –∑–∞ –¥–µ–Ω—å: –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å—É–º–º–∏—Ä—É—é—Ç—Å—è –≤ JSON `fids_stat.json`.
–ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è JSON:
- –ï—Å–ª–∏ –∑–∞–¥–∞–Ω `FIDS_STAT_PATH` –∏ —ç—Ç–æ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.json` ‚Äî –ø–∏—à–µ—Ç—Å—è —Ç—É–¥–∞
- –ï—Å–ª–∏ `FIDS_STAT_PATH` ‚Äî —ç—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è ‚Äî —Ñ–∞–π–ª –±—É–¥–µ—Ç `<dir>/fids_stat.json`
- –ò–Ω–∞—á–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `logs/fids_stat.json`
–í 09:00 –∏ 17:00 (–∏–ª–∏ –ø–æ —Ç–≤–æ–µ–º—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –≤ Jenkins) –ø—Ä–æ—á–∏—Ç–∞–π JSON –∏ –æ—Ç–ø—Ä–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞
```text
src/
  config.py        # –ó–∞–≥—Ä—É–∑–∫–∞ env, –æ–¥–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è FEEDS (CSV)
  fetch.py         # HTTP-–∑–∞–ø—Ä–æ—Å—ã, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–¥—Ñ–∏–¥–æ–≤ –∏–∑ feed.xml
  parser.py        # –ü–∞—Ä—Å–∏–Ω–≥ XML, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ offer'–æ–≤
  validator.py     # –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º
  alert.py         # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ (–∫–æ–Ω—Å–æ–ª—å/Telegram)
  main.py          # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞
```

–õ–æ–≥–∏
- –§–∞–π–ª—ã: `logs/YYYY-MM-DD-feed-test.log`.
- –ï—Å–ª–∏ –∑–∞–¥–∞–Ω `LOG_PUBLIC_BASE_URL`, —Å—Å—ã–ª–∫–∏ –≤ —Ä–µ–∑—é–º–µ –±—É–¥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —Ö–æ—Å—Ç —Å –ª–æ–≥–∞–º–∏.
